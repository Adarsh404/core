<div class="bgContent">
   <form action="" id="myForm3" class="content">
      <div class="widget-box">
         <div class="widget-header">
            <h4 class="widget-margin" style="color:black;">Create Project</h4>
         </div>
         <div class="widget-body">
            <div class="widget-main" style="min-height:200px">
               <div class="jarviswidget" id="wid-id-3" data-widget-editbutton="false" data-widget-custombutton="false">
                <div>
                  <div class="widget-body no-padding">
                     <div class="col-lg-6 col-md-6">
                        <label for="name">Name:<span class="control-label redSpan">&nbsp;*</span></label>
                        <label id="msgOrgName" style="display:none;color:red;float:right;">Required</label>
                        <br>
                        <input autofocus name="ctl00$MainContent$orgname" value="" id="projectname" class="form-control" type="text"  cdata="catalyst" cat-validation="required,nospecial,max15,nospace"  unique="true"  uniqueconditionedby="projectname,orgname,productgroupname">
                     </div>
                     <div class="col-lg-6 col-md-6">
                        <label for="name">Description:</label>
                        <input name="ctl00$MainContent$orgname" value="" id="description" class="form-control" type="text"  cdata="catalyst" maxlength="50">
                     </div>
                     <div class="col-lg-6 col-md-6" style="margin-top:25px;">
                        <label for="">Organization:<span class="control-label redSpan">&nbsp;*</span></label>
                        <select id="orgname" class="chooseOrganization form-control width-100" linkedfields="['productgroupname','environmentname','teamname']"  cdata="catalyst" cat-validation="required">
                           <option value="">Select Organization</option>
                        </select>
                     </div>
                     <div class="col-lg-6 col-md-6" style="margin-top:25px;">
                        <label for="">Business Group:<span class="control-label redSpan">&nbsp;*</span></label>
                        <select id="productgroupname" class="chooseBG form-control width-100" linkedto="orgname"  cdata="catalyst" cat-validation="required">
                           <option value="">Select Business Group</option>
                        </select>
                     </div>
                     <div class="col-lg-6 col-md-6 smart-form hidden" style="margin-top:25px;">
                        <label for="category">Environments:</label>
                        <div  id="environmentname" multiselect="multiselect" datatype="select" sourcepath="3" datapath="masterjson.rows.row"  linkedto="orgname" class="input-group from-control col-md-12 widthBox" cdata="catalyst">
                        </div>
                     </div>
                     <div class="col-lg-6 col-md-6 hidden">
                        <a style="cursor:pointer;" data-toggle="modal" data-backdrop="false" id="repoanchorDetails" href="#repodetailsModal"> <img title="Add Repository Details" data-placement="top" rel="tooltip" class="addrepoDetails" style="float:right;margin-top:20px;" src="img/add.png"></a>
                        <label style="float:left;margin-top:20px;">Repositories Details :</label>
                        <div class="table-responsive table-div">
                           <table id="tablerepositoryDetails" class="table table-striped table-bordered table-hover dataTable" style="border:1px solid #eeeeee !important; text-align:center;font-size:12px;margin-top:45px;" width="100%" cellpadding="5px">
                              <thead>
                                 <tr class="rowCustomStyle" style="font-weight:bold;">
                                    <td style="color:#fff;background-color: #2c3742; width:35%">Repository</td>
                                    <td style="color:#fff;background-color: #2c3742;">Name</td>
                                    <td style="color:#fff;background-color: #2c3742; width:10%">Action</td>
                                 </tr>
                              </thead>
                              <tbody id="repoDeployTbody">
                              </tbody>
                           </table>
                        </div>
                     </div>
                     <div class="col-lg-6 col-md-6 hidden">
                        <label for="name">Repository Details:</label>
                        <input autofocus name="ctl00$MainContent$orgname" value="" id="repositories" class="form-control" type="text"  cdata="catalyst">
                     </div>
                     <!-- end widget content -->
                  </div>
                </div>
               </div>
            </div>
         </div>
      </div>
      <div class="btn-group pull-right">
         <button  name="next2" id="next3" class="nextBG action-button" value="Next">Next</button>
      </div>
   </form>
</div>

<script>
    //jQuery time
    var current_fs, next_fs, previous_fs; //fieldsets
    var left, opacity, scale; //fieldset properties which we will animate
    var animating; //flag to prevent quick multi-click glitches

    var $optionSelect = $('<option></option').val(orgNameForSetup).attr('rowid',orgIdForSetup).html(orgNameForSetup);
    $('#orgname').append($optionSelect);   
       
    $('#orgname').change(function(e){
        $('#productgroupname').empty();
        var orgValue = $('#orgname option:selected').attr('rowid');
        orgValueSelected = $('#orgname option:selected').attr('rowid');
        $.get('/d4dMasters/readmasterjsonnew/2',function(data){
            for(var i=0;i<data.length;i++){
              if(data[i].orgname_rowid[0] === orgIdForSetup) {
                  var $option = $('<option></option>').val(data[i].productgroupname).attr('rowid',data[i].rowid).html(data[i].productgroupname);
                  $('#productgroupname').append($option);    
              }
            }
        });
    });
    
    var repositories = {
          nexus: [],
          docker: []
        };
    $('#repositories').val(JSON.stringify(repositories));
    
    $('#myForm3').submit(function() {
           $(this).validate();
   
           if($(this).valid){
                /*alert('valid form submitted'); // for demo*/
               if(!saveform('4')){
                $('#configManagement a').trigger('click');
                changeWizardStatus(orgIdForSetup);
                return false;
              }
           }else{
                alert('invalid valid form submitted'); // for demo
           }
           return false; // for demo
       }); 
    
    $(".nextBG").click(function(){
      toastr.success('Step 1 - Org Setup Completed');
    });

   /* $(".previous").click(function(){
        if(animating) return false;
        animating = true;

        current_fs = $(this).parent();
        previous_fs = $(this).parent().prev();

        //de-activate current step on progressbar
        $("#progressbar li").eq($("form").index(current_fs)).removeClass("active");

        //show the previous fieldset
        previous_fs.show();
        //hide the current fieldset with style
        current_fs.animate({opacity: 0}, {
            step: function(now, mx) {
                //as the opacity of current_fs reduces to 0 - stored in "now"
                //1. scale previous_fs from 80% to 100%
                scale = 0.8 + (1 - now) * 0.2;
                //2. take current_fs to the right(50%) - from 0%
                left = ((1-now) * 50)+"%";
                //3. increase opacity of previous_fs to 1 as it moves in
                opacity = 1 - now;
                current_fs.css({'left': left});
                previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
            },
            duration: 800,
            complete: function(){
                current_fs.hide();
                animating = false;
            },
            //this comes from the custom easing plugin
            easing: 'easeInOutBack'
        });
    });*/
</script>